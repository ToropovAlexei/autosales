{
  "db_name": "PostgreSQL",
  "query": "\n        WITH role_perms AS (\n            SELECT DISTINCT p.name\n            FROM user_roles ur\n            JOIN role_permissions rp ON ur.role_id = rp.role_id\n            JOIN permissions p ON rp.permission_id = p.id\n            WHERE ur.user_id = $1\n        ),\n        user_perms AS (\n            SELECT p.name, up.effect\n            FROM user_permissions up\n            JOIN permissions p ON up.permission_id = p.id\n            WHERE up.user_id = $1\n        )\n        SELECT name FROM user_perms WHERE effect = 'allow'\n        UNION\n        SELECT name FROM role_perms\n        EXCEPT\n        SELECT name FROM user_perms WHERE effect = 'deny'\n        ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "name",
        "type_info": "Text"
      }
    ],
    "parameters": {
      "Left": [
        "Int8"
      ]
    },
    "nullable": [
      null
    ]
  },
  "hash": "b75fbf98ce9170dbe1088362b60fad67616f9be8a816743c5089623af458f70a"
}
